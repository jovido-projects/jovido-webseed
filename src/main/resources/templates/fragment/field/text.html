<html xmlns:th="//www.thymeleaf.org" th:remove="tag">
<th:block th:replace="fragment/field-container(input=~{::foobar})">
    <th:block th:fragment="foobar"
              th:with="hasErrors=${#fields.hasErrors('fragment.attributes[__${field.name}__][__${status.index}__]')}">

        <div class="input-group-addon">
            <span class="fa fa-file-text-o"></span>
        </div>
        <input type="text" class="form-control"
               th:name="fragment.attributes[__${field.name}__].value"
               th:value="${@fragmentService.getValue(payload)}">

        <th:block th:if="${hasErrors}">
            ERRORRRRRRRR
        </th:block>
    </th:block>

</th:block>
</html>