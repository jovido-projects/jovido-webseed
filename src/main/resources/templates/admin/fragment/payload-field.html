<html xmlns:th="http://www.thymeleaf.org"
      xmlns:cp="http://www.getwebseed/dialect/cp"
      th:remove="tag">

<div class="form-group" th:with="field = ${self}">
    <div>
        <strong th:text="'__${field.payload.sequence.attributeName}__#__${field.payload?.ordinal}__'">Label</strong>
        <div class="btn-group btn-group-sm pull-right">
            <button class="btn btn-secondary"
                    th:remove="${field.moveUpAction == null} ? all : _"
                    th:disabled="${field.moveUpAction?.disabled} ? disabled : _"
                    th:formaction="${field.moveUpAction?.url}">
                <i class="fa fa-arrow-up"></i>
            </button>
            <button class="btn btn-secondary"
                    th:remove="${field.moveDownAction == null} ? all : _"
                    th:disabled="${field.moveDownAction?.disabled} ? disabled : _"
                    th:formaction="${field.moveDownAction?.url}">
                <i class="fa fa-arrow-down"></i>
            </button>
            <button class="btn btn-secondary"
                    th:remove="${field.removeAction == null} ? all : _"
                    th:formaction="${field.removeAction?.url}">
                <i class="fa fa-remove"></i>
            </button>
        </div>
    </div>

    <th:block th:replace="${control} ?: _" />


    <th:block th:if="${field.last}" th:with="actions = ${field.appendActions},primary = ${actions.primary}">
        <br />

        <div class="btn-group" th:if="${!actions.empty}">
            <th:block th:if="${primary != null}">
                <button type="button" class="btn btn-secondary">
                    <span th:text="${primary.text?.value}">Action</span>
                </button>
                <button type="button" class="btn btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span class="sr-only">Toggle Dropdown</span>
                </button>
            </th:block>
            <th:block th:if="${primary == null}">
                <button type="button" class="btn btn-secondary dropdown-toggle " data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fa fa-plus"></i>
                    <!--<span class="sr-only">Toggle Dropdown</span>-->
                </button>
            </th:block>
            <div class="dropdown-menu">
                <button th:each="action : ${field.appendActions}" th:formaction="${action.url}"
                        class="dropdown-item" href="#">
                    <span th:text="${action?.text?.value}">Text</span>
                </button>

            </div>
        </div>
    </th:block>

</div>

</html>