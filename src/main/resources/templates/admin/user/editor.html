<html xmlns:th="//www.thymeleaf.org"
      th:replace="admin/page(main=~{::main})"
      th:remove="tag">

<div th:fragment="main">
    <div class="container">
        <form th:object="${userEditor}" method="post" th:with="user=*{user}">

            <ol class="breadcrumb">
                <li><a href="#">Home</a></li>
                <li class="active"><a th:href="@{/admin/users}">Users</a></li>
            </ol>

            <th:block th:if="${user.id != null}">
                <h1>
                    User
                    <span th:text="${user.name}">Name</span>
                </h1>
            </th:block>
            <th:block th:if="${user.id == null}">
                <h1>
                    New user
                </h1>
            </th:block>

            <div class="form-group">
                <label>Username</label>
                <input type="text" class="form-control" th:field="*{user.name}">
            </div>

            <div class="form-group">
                <label>Password</label>
                <input type="text" class="form-control" th:field="*{user.password}">
            </div>

            <table class="table">
                <thead>
                <tr>
                    <th width="1%">&nbsp;</th>
                    <th width="99%">Role</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="role,roleItr : ${@securityService.findAllRoles()}">
                    <td>
                        <input type="checkbox"
                               th:field="*{selectedAuthorities}"
                               th:value="${role.authority}">
                    </td>
                    <td>
                        <span th:text="${role.authority}">Authority</span>
                    </td>
                </tr>
                </tbody>
            </table>

            <button class="btn btn-primary" th:formaction="@{save}">
                <i class="fa fa-disk"></i>
                Save
            </button>
            <button class="btn btn-default"
                    th:formaction="@{close}" >
                <i class="fa fa-times"></i>
                Close
            </button>
        </form>
    </div>
</div>
</html>