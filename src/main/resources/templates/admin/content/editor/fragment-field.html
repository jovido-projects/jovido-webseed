<html xmlns:th="//www.thymeleaf.org" th:remove="tag">

<div class="panel panel-default">
    <div class="panel-heading">
        <span th:text="${field.name}">Field Name</span>
        <span class="badge"
              th:if="${attribute.capacity > 1}"
              th:text="${field.payloads.size()}">#</span>

        <div class="btn-group btn-group-xs pull-right">
            <button class="btn btn-default" disabled>
                <i class="fa fa-search"></i>
                <span>Suchen</span>
            </button>
            <button class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true">
                <i class="fa fa-plus"></i>
                <span>Neu</span>
            </button>
            <ul class="dropdown-menu">
                <li th:each="structureName : ${attribute.structureNames}">
                    <a th:href="@{append-payload(
                                               field=${field.name},
                                               structure=${structureName})}">
                        <span th:text="#{seed.structure.__${structureName}__}">Structure Name</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <ul class="list-group">
        <th:block th:each="payload,payloadItr : ${field.payloads}">

            <th:block th:with="bindingPath=editor.fragment.fields[__${field.name}__].payloads[__${payloadItr.index}__].value">
                <li class="list-group-item">
                    <h3 class="" th:classappend="${payload.toBeRemoved} ? 'remove' : _">
                        <span th:text="${payload.ordinal + 1}">#</span>.
                        <span th:with="fragment=${payload.value},structure=${@itemService.getStructure(fragment)}"
                              th:text="#{seed.structure.__${structure?.name}__}">Structure Name</span>
                        <div class="btn-group btn-group-xs pull-right">
                            <button class="btn btn-default" formmethod="post"
                                    th:formaction="@{edit(field=${field.name},index=${payloadItr.index})}">
                                <i class="fa fa-edit"></i>
                                Bearbeiten
                            </button>
                            <button class="btn btn-default"
                                    th:disabled="${payloadItr.index == 0} ?: _"
                                    th:formaction="@{move-payload-up(
                                                                field=${field.name},
                                                                index=${payloadItr.index})}">
                                <i class="fa fa-arrow-up"></i>
                            </button>
                            <button class="btn btn-default"
                                    th:disabled="${payloadItr.index == field.payloads.size() - 1} ?: _"
                                    th:formaction="@{move-payload-down(
                                                                field=${field.name},
                                                                index=${payloadItr.index})}">
                                <i class="fa fa-arrow-down"></i>
                            </button>
                            <button class="btn btn-default"
                                    th:formaction="@{remove-payload(
                                                                field=${field.name},
                                                                index=${payloadItr.index})}">
                                <i class="fa fa-trash"></i>
                            </button>
                        </div>
                    </h3>

                    <span th:replace="admin/content/editor/fragment-summary::default(${payload.value})">Zusammenfassung</span>
                </li>
            </th:block>
        </th:block>
    </ul>
</div>

</html>