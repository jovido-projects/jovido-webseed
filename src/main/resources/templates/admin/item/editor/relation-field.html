<html xmlns:th="//www.thymeleaf.org" th:remove="tag">
<div class="panel panel-default">
    <div class="panel-heading">
        <h3>Relation field</h3>
        <span th:text="${field.name}">Field name</span>
    </div>
    <div class="panel-body">
        <th:block th:each="value,valueItr : ${field.values}">
            <!--<div class="form-group">-->
                <!--<label th:text="${valueItr.index}">Label</label>-->
                <!--<input type="text" class="form-control"-->
                       <!--th:field="*{fields[__${field.name}__].values[__${valueItr.index}__].payload.value.target}">-->
            <!--</div>-->

            <p th:with="nestedPath='__${nestedPath}__fields[__${field.name}__].values[__${valueItr.index}__].'">
                [[${nestedPath}]]
            </p>

        </th:block>

        <div class="btn-group">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Append <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
                <li th:each="allowedStructure : ${field.allowedStructures}">
                    <a th:href="@{append-payload(
                    property=${field.name},
                    structure=${allowedStructure.name})}">
                        <span th:text="${allowedStructure.name}">Name</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>
</html>