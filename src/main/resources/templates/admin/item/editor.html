<html xmlns:th="//www.thymeleaf.org" th:remove="tag">
<th:block th:with="nestedPath='item',nestingLevel=0">
    <th:block th:fragment="fields" th:with="nestingLevel=${nestingLevel+1}">
        <th:block th:with="item=*{__${nestedPath}__},structure=${@itemService.getStructure(item)}">
            <th:block th:each="attribute,attributeItr : ${structure.attributes}">
                <th:block th:with="group=${@itemService.getOrCreatePayloadGroup(item, attribute.name)}">
                    <!--<hr th:if="${attributeItr.index > 0}" />-->
                    <p th:if="${attributeItr.index > 0}" ></p>
                    <th:block th:replace="${editor.getPayloadGroupTemplate(group)}" />
                </th:block>
            </th:block>
        </th:block>
    </th:block>
</th:block>
</html>