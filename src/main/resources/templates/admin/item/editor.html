<html xmlns:th="//www.thymeleaf.org" th:remove="tag">
<th:block th:with="nestedPath='item',nestingLevel=0">
    <th:block th:fragment="fields" th:with="nestingLevel=${nestingLevel+1}">
        <th:block th:with="item=*{__${nestedPath}__},structure=${@itemService.getStructure(item)}">
            <th:block th:each="attribute : ${structure.attributes}">
                <th:block th:with="sequence=${@itemService.getOrCreateSequence(item, attribute.name)}">
                    <th:block th:replace="${editor.sequenceTemplateProvider.getTemplate(sequence)}" />
                </th:block>
            </th:block>
        </th:block>
    </th:block>
</th:block>
</html>